{% load djng_tags %}
{% verbatim %}


<div class="container">
  <div class="row">
	<div class="col-md-12 text-center">
      <h2 ng-if="!parent">Your Certificate Authorities</h2>
      <h2 ng-if="parent"><span ng-if="parent.type=='R'">Root</span><span ng-if="parent.type=='I'">Intermediate</span> certificate ({{parent.name}})</h2>
    </div>
  </div>
  <div class="row">
	<div class="col-md-12">
      <div ng-if="parent" class="cert-path">
      	<span>/<a href="#/dashboard/">root</a></span>
      	<span ng-repeat="cert in parent.cert_path track by cert.id" >/<a href="#/dashboard/{{cert.id}}">{{cert.shortname}}</a></span>
      </div>
    </div>
  </div>
  <div class="row">
	<div class="col-md-12">
      <div class="table-responsive">
		<table id="mytable" class="table table-bordred table-striped">
            <thead>
	             <th class="col-md-2">Name</th>
	             <th class="col-md-4">Common Name</th>
	             <th class="col-md-2">E-mail</th>
	             <th class="col-md-1">Expires at</th>
	             <th class="col-md-1">Actions</th>	
	        </thead>
		    <tbody>
		      <tr ng-repeat="cert in certs track by cert.id">
		      
		         <td class="vert-align">
		         	<span class="label label-danger" ng-if="cert.type=='R'"><span class="glyphicon glyphicon-tower"></span></span>
		         	<span class="label label-warning " ng-if="cert.type=='I'"><span class="glyphicon glyphicon-certificate"></span></span>
		         	<span class="label label-primary " ng-if="cert.type=='S'"><span class="glyphicon glyphicon-hdd"></span></span>
		         	<span class="label label-success " ng-if="cert.type=='C'"><span class="glyphicon glyphicon-user"></span></span>
		         	{{ cert.shortname|limitTo:15 }}
		         </td>
		         <td class="vert-align">{{ cert.dn.commonName|limitTo:75 }}</td>
		         <td class="vert-align">{{ cert.dn.emailAddress|limitTo:30 }}</td>
		         <td class="vert-align">{{ cert.expires_at|date:"yyyy-MM-dd" }}</td>
		         <td class="vert-align">
		           <!--  todo: if revoked, replace buttons by text of box REVOKED -->
		         	<p class="left" data-placement="top" data-toggle="tooltip" title="Download public certificate"><a class="btn btn-default btn-xs" href="/api/v1/certificates/files/{{cert.id}}"><span class="glyphicon glyphicon-download-alt"></span></a></p>
		         	<p class="left margin-left" data-placement="top" data-toggle="tooltip" title="Detail info"><button class="btn btn-default btn-xs" ><span class="glyphicon glyphicon-info-sign"></span></button></p>
		         	<p class="left margin-left" data-placement="top" data-toggle="tooltip" title="Manage signed certificates" ng-if="cert.type=='R' || cert.type=='I'"><a class="btn btn-primary btn-xs" href="#/dashboard/{{cert.id}}"><span class="glyphicon glyphicon-pencil"></span></a></p>
		         	<p class="left margin-left" data-placement="top" data-toggle="tooltip" title="Manage signed certificates" ng-if="cert.type=='S' || cert.type=='C'"><a class="btn btn-danger btn-xs" href="#/dashboard/{{cert.id}}"><span class="glyphicon glyphicon-trash"></span></a></p>
		         </td>
		      </tr>
		    </tbody>        
		</table>
      </div>
	</div>
</div>
<div class="container">
  <div class="row">
    <div class="col-md-9" style="padding-left: 0px;">
   		<uib-pagination items-per-page="10" total-items="pagination.totalItems" ng-model="pagination.page" max-size="pagination.maxSize" ng-change="pageChanged()" class="pagination-sm" boundary-link-numbers="true" rotate="false"></uib-pagination>
    </div>
	<div class="col-md-1">
		<div class="pull-right add-text-table">
		Add:
		</div>
	</div>
	<div class="col-md-2">
		<div class="pull-right add-button-table " ng-if="!parent">
			<p data-placement="top" data-toggle="tooltip" title="Create Root Certificate">
				<button class="btn btn-danger btn-xs" data-title="New" data-toggle="modal" data-target="#new-root-cert"><span class="glyphicon glyphicon-tower"></span></button>
			</p>
		</div>
		<div class="pull-right add-button-table" ng-if="parent.type=='R'">
			<p data-placement="top" data-toggle="tooltip" title="Create Intermediate Certificate">
				<button class="btn btn-warning btn-xs" data-title="New" data-toggle="modal" data-target="#new-intermediate-cert"><span class="glyphicon glyphicon-certificate"></span></button>
			</p>
		</div>
		<div class="pull-right add-button-table" ng-if="parent.type=='I'">
			<p class="left margin-left" data-placement="top" data-toggle="tooltip" title="Create Intermediate Certificate">
				<button class="btn btn-warning btn-xs" data-title="New" data-toggle="modal" data-target="#new-intermediate-cert"><span class="glyphicon glyphicon-certificate"></span></button>
			</p>
			<p class="left margin-left" data-placement="top" data-toggle="tooltip" title="Create Client Certificate">
				<button class="btn btn-success btn-xs" data-title="New" data-toggle="modal" data-target="#new-client-cert"><span class="glyphicon glyphicon-user"></span></button>
			</p>
			<p class="left margin-left" data-placement="top" data-toggle="tooltip" title="Create Server Certificate">
				<button class="btn btn-primary btn-xs" data-title="New" data-toggle="modal" data-target="#new-server-cert"><span class="glyphicon glyphicon-hdd"></span></button>
			</p>
		</div>
    </div>
  </div>
</div>
<div class="container">
	<div class="row"><br/></div>
</div>
<!-- 
<div class="clearfix"></div>
<ul class="pagination pull-right">
  <li class="disabled"><a href="#"><span class="glyphicon glyphicon-chevron-left"></span></a></li>
  <li class="active"><a href="#">1</a></li>
  <li><a href="#">2</a></li>
  <li><a href="#">3</a></li>
  <li><a href="#">4</a></li>
  <li><a href="#">5</a></li>
  <li><a href="#"><span class="glyphicon glyphicon-chevron-right"></span></a></li>
</ul>
                
                		         	<span class="label label-danger" ng-if="cert.type=='R'"><span class="glyphicon glyphicon-tower"></span></span>
		         	<span class="label label-warning " ng-if="cert.type=='I'"><span class="glyphicon glyphicon-certificate"></span></span>
		         	<span class="label label-primary " ng-if="cert.type=='S'"><span class="glyphicon glyphicon-hdd"></span></span>
		         	<span class="label label-success " ng-if="cert.type=='C'"><span class="glyphicon glyphicon-user"></span></span>
            </div>
            

-->
 

<div class="modal fade" id="new-root-cert" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
		  <h3 class="modal-title custom_align" id="Heading" >Add new Root Certificate</h3>
		</div>
		  <ng-include src="getRootCertForm()"></ng-include>      
    </div>
  </div>
</div>

<div class="modal fade" id="new-intermediate-cert" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
		  <h3 class="modal-title custom_align" id="Heading" >Add new Intermediate Certificate</h3>
		</div>
		  <ng-include src="getIntermediateCertForm()"></ng-include>
		    
    </div>
  </div>
</div>

<div class="modal fade" id="new-client-cert" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
		  <h3 class="modal-title custom_align" id="Heading" >Add new Client Certificate</h3>
		</div>
		  <ng-include src="getClientCertForm()"></ng-include>     
    </div>
  </div>
</div>

<div class="modal fade" id="new-server-cert" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
		  <h3 class="modal-title custom_align" id="Heading" >Add new Server Certificate</h3>
		</div>
		  <ng-include src="getServerCertForm()"></ng-include>      
    </div>
  </div>
</div>
{% endverbatim %}


<!--
		  <h3 class="modal-title custom_align" id="Heading" ng-if="!parent">Add new Root Certificate</h3>
		  <h3 class="modal-title custom_align" id="Heading" ng-if="parent">Add new Certificate</h3>
		<div ng-if="!parent">Your Certificate Authorities</div>
      <h2 ng-if="parent"><span ng-if="parent.type=='R'">Root</span><span ng-if="parent.type=='I'">Intermediate</span> certificate ({{parent.name}})</h2>
		
    


<div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
      <div class="modal-dialog">
    <div class="modal-content">
          <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
        <h4 class="modal-title custom_align" id="Heading">Edit Your Detail</h4>
      </div>
          <div class="modal-body">
          <div class="form-group">
        <input class="form-control " type="text" placeholder="Mohsin">
        </div>
        <div class="form-group">
        
        <input class="form-control " type="text" placeholder="Irshad">
        </div>
        <div class="form-group">
        <textarea rows="2" class="form-control" placeholder="CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan"></textarea>
    
        
        </div>
      </div>
          <div class="modal-footer ">
        <button type="button" class="btn btn-warning btn-lg" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign"></span> Update</button>
      </div>
        </div>
    <!-- /.modal-content --> 
   <!--  </div>
      <!-- /.modal-dialog --> 
   <!--    </div>
    
    
    
    <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
      <div class="modal-dialog">
    <div class="modal-content">
          <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
        <h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
      </div>
          <div class="modal-body">
       
       <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this Record?</div>
       
      </div>
        <div class="modal-footer ">
        <button type="button" class="btn btn-success" ><span class="glyphicon glyphicon-ok-sign"></span> Yes</button>
        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> No</button>
      </div>
        </div>
    <!-- /.modal-content --> 
   <!--  </div>
      <!-- /.modal-dialog --> 
   <!--    </div>
 -->
 
 